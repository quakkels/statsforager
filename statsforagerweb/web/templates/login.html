<!DOCTYPE html>
<html lang="en">
	<head>
		{{ template "_tophead.html" . }}
		<title>StatsForager.com - Log in</title>
	</head>
	<body>
		{{ template "_topbody.html" . }}
		<main>
			<section class="region row">
				<div id="form" class="center-self card" style="min-width: 372px;">
					{{ if .Model.IsPostSuccess }}
					<div class="frame">
						<h1>Check email</h1>
						<p>
							A login link has been emailed to you. Please follow that link to finish logging in.
						</p>
						<p>
							You may close this browser tab.
						</p>
					</div>
					{{ else }}
					<form 
						method="post" 
						action="/login"
						hx-post="/login"
						hx-target="body">
						{{ .CsrfInputElement }}
						<div class="frame">
							<h1>Log in to StatsForager</h1>
							<p>
								<input autofocus placeholder="Email" type="email" id="email" name="email" style="width:100%" value="{{ .Model.Email }}">
							</p>
							<p>
								<button type="submit">Log In</button>
								<a class="button transparent" href="/register" hx-get="/register" hx-target="body">...or, sign up.</a>
							</p>
							{{ if .Model.Errors }}
							<ul class="error">
								{{ range .Model.Errors }}
								<li>{{ . }}</li>
								{{ end }}
							</ul>
							{{ end }}
						</div>
					</form>
					{{ end }}
				</div>
			</section>
		</main>
		{{ template "_bottom.html" . }}
	</body>
</html>
